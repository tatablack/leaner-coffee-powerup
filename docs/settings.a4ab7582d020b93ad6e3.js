try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f2802586-1995-462b-996f-43018489c2e6",e._sentryDebugIdIdentifier="sentry-dbid-f2802586-1995-462b-996f-43018489c2e6")}catch(e){}!function(){"use strict";const e=(e,t,i)=>{const s=i.value,r="AsyncFunction"===s.constructor.name,o=`Leaner Coffee Power-Up: error in ${t} (reported)`;return i.value=r?async function(...e){try{return await s.apply(this,e)}catch(e){console.warn(o),window.Sentry.captureException(e)}}:function(...e){try{return s.apply(this,e)}catch(e){console.warn(o),window.Sentry.captureException(e)}},i};function t(t){const i=t.prototype;return Object.getOwnPropertyNames(i).filter((e=>"function"==typeof i[e]&&"constructor"!==e)).forEach((t=>{const s=Object.getOwnPropertyDescriptor(i,t);if(s&&"function"==typeof s.value){const r=e(0,t,s);Object.defineProperty(i,t,r)}})),t}const i=e=>{const t=e.constructor.prototype;Object.getOwnPropertyNames(t).filter((e=>"function"==typeof t[e]&&"constructor"!==e)).forEach((i=>t[i]=t[i].bind(e)))};var s,r=function(e,t,i,s){var r,o=arguments.length,n=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(o<3?r(n):o>3?r(t,i,n):r(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};let o=s=class{constructor(e="member",t="private"){Object.assign(this,{scope:e,visibility:t}),i(this)}canWrite(e){return"member"===this.scope||e.memberCanWriteToModel(this.scope)}static async getMemberType(e){const t=await e.board("memberships"),i=await e.member("id"),s=t.memberships.find((e=>e.idMember===i.id));return s?s.memberType:"unknown"}read(e,t,i){return e.get(i??this.scope,this.visibility,t)}async write(e,t,i,r){"memberCanWriteToModel"in e||window.Sentry.addBreadcrumb({category:"database",message:`Unknown permissions when trying to save "${t}" to the "${this.scope}" ${this.visibility} scope"`,level:"warning"}),!("memberCanWriteToModel"in e)||this.canWrite(e)?await e.set(r??this.scope,this.visibility,t,i):window.Sentry.captureException(new Error("Error while editing scope"),{contexts:{WriteOperation:{scope:this.scope,visibility:this.visibility,key:t,hasCardId:!!r,memberType:await s.getMemberType(e)}}})}async writeMultiple(e,t,i){"memberCanWriteToModel"in e||window.Sentry.addBreadcrumb({category:"database",message:`Unknown permissions when trying to save "${Object.keys(t).join(", ")}" to the "${this.scope}" ${this.visibility} scope`,level:"warning"}),!("memberCanWriteToModel"in e)||this.canWrite(e)?await e.set(i??this.scope,this.visibility,t):window.Sentry.captureException(new Error("Error while editing scope"),{contexts:{WriteOperation:{scope:this.scope,visibility:this.visibility,key:Object.keys(t),hasCardId:!!i,memberType:await s.getMemberType(e)}}})}async delete(e,t,i){if("memberCanWriteToModel"in e||window.Sentry.addBreadcrumb({category:"database",message:`Unknown permissions when trying to save "${t}" to the "${this.scope}" ${this.visibility} scope"`,level:"warning"}),!("memberCanWriteToModel"in e)||this.canWrite(e))return e.remove(i??this.scope,this.visibility,t);window.Sentry.captureException(new Error("Error while editing scope"),{contexts:{DeleteOperation:{scope:this.scope,visibility:this.visibility,key:t,hasCardId:!!i,memberType:await s.getMemberType(e)}}})}async deleteMultiple(e,t,i){if("memberCanWriteToModel"in e||window.Sentry.addBreadcrumb({category:"database",message:`Unknown permissions when trying to save "${Object.keys(t).join(", ")}" to the "${this.scope}" ${this.visibility} scope`,level:"warning"}),!("memberCanWriteToModel"in e)||this.canWrite(e))return e.remove(i??this.scope,this.visibility,t);window.Sentry.captureException(new Error("Error while editing scope"),{contexts:{DeleteOperation:{scope:this.scope,visibility:this.visibility,key:Object.keys(t),hasCardId:!!i,memberType:await s.getMemberType(e)}}})}};o=s=r([t],o);var n=o;class a extends n{constructor(){super("board","shared")}}a.DISCUSSION_STATUS="leancoffeeDiscussionStatus",a.DISCUSSION_CARD_ID="leancoffeeDiscussionCardId",a.DISCUSSION_STARTED_AT="leancoffeeDiscussionStartedAt",a.DISCUSSION_PREVIOUS_ELAPSED="leancoffeeDiscussionPreviousElapsed",a.DISCUSSION_INTERVAL_ID="leancoffeeDiscussionIntervalId",a.POWER_UP_INSTALLATION_DATE="powerUpInstallationDate",a.ORGANISATION_HASH="organisationHash",a.BOARD_HASH="boardHash";var c=a;class l extends n{constructor(){super("card","shared")}}l.DISCUSSION_STATUS="leancoffeeDiscussionStatus",l.DISCUSSION_ELAPSED="leancoffeeDiscussionElapsed",l.DISCUSSION_THUMBS="leancoffeeDiscussionThumbs",l.VOTES="leancoffeeVotes",l.DISCUSSION_BUTTON_LABEL="discussionButtonLabel";var p=l;class d extends n{constructor(){super("member","private")}}d.POWER_UP_VERSION="powerUpVersion";var y=d,h=function(e,t,i,s){var r,o=arguments.length,n=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(o<3?r(n):o>3?r(t,i,n):r(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};let u=class{constructor({w:e,config:t}){this.w=e,this.config=t,this.boardStorage=new c,this.cardStorage=new p,this.memberStorage=new y,i(this)}};u=h([t],u);const{supportedLocales:b}={hostname:"https://leaner-coffee.tatablack.net",defaultDuration:3e5,supportedLocales:["en","it"]},f={defaultLocale:"en",supportedLocales:b,resourceUrl:"/i18n/{locale}.json"};class w extends u{constructor({w:e,config:t}){super({w:e,config:t}),this.t=e.TrelloPowerUp.iframe({localization:f,helpfulStacks:!1}),Promise.all([this.boardStorage.read(this.t,c.ORGANISATION_HASH),this.boardStorage.read(this.t,c.BOARD_HASH)]).then((([e,t])=>{this.w.Sentry&&this.w.Sentry.onLoad((async()=>{this.w.Sentry.setTags({organisationIdHash:e,boardIdHash:t})}))}))}}new class extends w{init(){this.t.render((()=>{this.t.localizeNode(document.body),this.t.sizeTo("#leanCoffeeSettingsForm")}))}async showData(e){e.preventDefault()}async wipeData(e){e.preventDefault()}}({w:window,config:{production:{hostname:"https://leaner-coffee.tatablack.net",defaultDuration:3e5,supportedLocales:["en","it"]}}}).init()}();
//# sourceMappingURL=settings.a4ab7582d020b93ad6e3.js.map