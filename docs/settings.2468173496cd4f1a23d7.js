!function(){"use strict";var e=class{constructor(e="member",s="private"){Object.assign(this,{scope:e,visibility:s})}read(e,s,t){return e.get(t??this.scope,this.visibility,s)}write(e,s,t,i){return e.set(i??this.scope,this.visibility,s,t)}writeMultiple(e,s,t){return e.set(t??this.scope,this.visibility,s)}delete(e,s,t){return e.remove(t??this.scope,this.visibility,s)}deleteMultiple(e,s,t){return e.remove(t??this.scope,this.visibility,s)}};class s extends e{constructor(){super("board","shared")}async getDiscussionStatus(e){return super.read(e,s.DISCUSSION_STATUS)}async getDiscussionCardId(e){return super.read(e,s.DISCUSSION_CARD_ID)}async getDiscussionStartedAt(e){return super.read(e,s.DISCUSSION_STARTED_AT)}async getDiscussionPreviousElapsed(e){return super.read(e,s.DISCUSSION_PREVIOUS_ELAPSED)}async getDiscussionIntervalId(e){return super.read(e,s.DISCUSSION_INTERVAL_ID)}async getPowerUpInstallationDate(e){return super.read(e,s.POWER_UP_INSTALLATION_DATE)}async getOrganisationIdHash(e){return super.read(e,s.ORGANISATION_HASH)}async setOrganisationIdHash(e,t){return super.write(e,s.ORGANISATION_HASH,t)}async getBoardIdHash(e){return super.read(e,s.BOARD_HASH)}async setBoardIdHash(e,t){return super.write(e,s.BOARD_HASH,t)}async getInitialised(e){return!!await super.read(e,s.POWER_UP_INSTALLATION_DATE)}setPowerUpInstallationDate(e,t){return super.write(e,s.POWER_UP_INSTALLATION_DATE,t)}}s.DISCUSSION_STATUS="leancoffeeDiscussionStatus",s.DISCUSSION_CARD_ID="leancoffeeDiscussionCardId",s.DISCUSSION_STARTED_AT="leancoffeeDiscussionStartedAt",s.DISCUSSION_PREVIOUS_ELAPSED="leancoffeeDiscussionPreviousElapsed",s.DISCUSSION_INTERVAL_ID="leancoffeeDiscussionIntervalId",s.POWER_UP_INSTALLATION_DATE="powerUpInstallationDate",s.ORGANISATION_HASH="organisationHash",s.BOARD_HASH="boardHash";var t=s;class i extends e{constructor(){super("card","shared")}getDiscussionStatus(e){return super.read(e,i.DISCUSSION_STATUS)}getDiscussionElapsed(e){return super.read(e,i.DISCUSSION_ELAPSED)}getDiscussionThumbs(e){return super.read(e,i.DISCUSSION_THUMBS)}getDiscussionButtonLabel(e){return super.read(e,i.DISCUSSION_BUTTON_LABEL)}saveDiscussionStatus(e,s,t){return super.write(e,i.DISCUSSION_STATUS,s,t)}saveDiscussionElapsed(e,s,t){return super.write(e,i.DISCUSSION_ELAPSED,s,t)}saveDiscussionThumbs(e,s){return super.write(e,i.DISCUSSION_THUMBS,s)}saveVotes(e,s){return super.write(e,i.VOTES,s)}deleteVotes(e){return super.delete(e,i.VOTES)}saveDiscussionButtonLabel(e,s){return super.write(e,i.DISCUSSION_BUTTON_LABEL,s)}deleteDiscussionThumbs(e){return super.delete(e,i.DISCUSSION_THUMBS)}}i.DISCUSSION_STATUS="leancoffeeDiscussionStatus",i.DISCUSSION_ELAPSED="leancoffeeDiscussionElapsed",i.DISCUSSION_THUMBS="leancoffeeDiscussionThumbs",i.VOTES="leancoffeeVotes",i.DISCUSSION_BUTTON_LABEL="discussionButtonLabel";var a=i;class r extends e{constructor(){super("member","private")}}r.POWER_UP_VERSION="powerUpVersion";var n=r;class o{constructor({w:e,config:s}){this.isRunningInProduction=()=>!0,this.w=e,this.config=s,this.boardStorage=new t,this.cardStorage=new a,this.memberStorage=new n}}var S=class{static async showData(e){console.groupCollapsed("Current context"),console.log(JSON.stringify(e.getContext(),null,2)),console.groupEnd();const s=await e.getAll();console.groupCollapsed("Board data"),console.log(JSON.stringify(s,null,2)),console.groupEnd();const t=(await e.cards("id","name")).map((async s=>{const t=await e.get(s.id,"shared");return{name:s.name,...t}}));(await Promise.all(t)).forEach((e=>{console.groupCollapsed("Card data"),console.log(JSON.stringify(e,null,2)),console.groupEnd()}))}static async wipeData(e,s,i){await i.deleteMultiple(e,[t.DISCUSSION_STATUS,t.DISCUSSION_CARD_ID,t.DISCUSSION_STARTED_AT,t.DISCUSSION_PREVIOUS_ELAPSED,t.DISCUSSION_INTERVAL_ID]);const r=await e.cards("all");Promise.all(r.map((async t=>{await s.deleteMultiple(e,[a.DISCUSSION_STATUS,a.DISCUSSION_ELAPSED,a.DISCUSSION_THUMBS,a.VOTES],t.id)}))).then((()=>{console.log("Data wipe finished")}))}};const{supportedLocales:u}={hostname:"https://leaner-coffee.tatablack.net",defaultDuration:3e5,supportedLocales:["en","it"]},c={defaultLocale:"en",supportedLocales:u,resourceUrl:"/i18n/{locale}.json"};var l=class extends o{constructor({w:e,config:s}){super({w:e,config:s}),this.showData=async e=>{e.preventDefault(),this.isRunningInProduction()||await S.showData(this.t)},this.wipeData=async e=>{e.preventDefault(),this.isRunningInProduction()||await S.wipeData(this.t,this.cardStorage,this.boardStorage)},this.t=e.TrelloPowerUp.iframe({localization:c,helpfulStacks:!this.isRunningInProduction()})}init(){this.isRunningInProduction()||(this.w.document.querySelector(".dev-only").style.display="block",this.w.document.getElementById("showData").addEventListener("click",this.showData.bind(this)),this.w.document.getElementById("wipeData").addEventListener("click",this.wipeData.bind(this))),this.t.render((()=>{this.t.localizeNode(document.body),this.t.sizeTo("#leanCoffeeSettingsForm")}))}};new l({w:window,config:{production:{hostname:"https://leaner-coffee.tatablack.net",defaultDuration:3e5,supportedLocales:["en","it"]}}}).init()}();
//# sourceMappingURL=settings.2468173496cd4f1a23d7.js.map