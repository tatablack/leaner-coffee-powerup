try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="663b388b-2c21-4d1a-b6d8-31f82e271e3a",e._sentryDebugIdIdentifier="sentry-dbid-663b388b-2c21-4d1a-b6d8-31f82e271e3a")}catch(e){}!function(){"use strict";const e=(e,t,i)=>{const s=i.value,r="AsyncFunction"===s.constructor.name,n=`Leaner Coffee Power-Up: error in ${t} (reported)`;return i.value=r?async function(...e){try{return await s.apply(this,e)}catch(e){console.warn(n),window.Sentry.captureException(e)}}:function(...e){try{return s.apply(this,e)}catch(e){console.warn(n),window.Sentry.captureException(e)}},i};function t(t){const i=t.prototype;return Object.getOwnPropertyNames(i).filter((e=>"function"==typeof i[e]&&"constructor"!==e)).forEach((t=>{const s=Object.getOwnPropertyDescriptor(i,t);if(s&&"function"==typeof s.value){const r=e(0,t,s);Object.defineProperty(i,t,r)}})),t}const i=e=>{const t=e.constructor.prototype;Object.getOwnPropertyNames(t).filter((e=>"function"==typeof t[e]&&"constructor"!==e)).forEach((i=>t[i]=t[i].bind(e)))};var s,r=function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};let n=s=class{constructor(e="member",t="private"){Object.assign(this,{scope:e,visibility:t}),i(this)}canWrite(e){return"member"===this.scope||e.memberCanWriteToModel(this.scope)}static async getMemberType(e){const t=await e.board("memberships"),i=await e.member("id"),s=t.memberships.find((e=>e.idMember===i.id));return s?s.memberType:"unknown"}read(e,t,i){return e.get(i??this.scope,this.visibility,t)}async write(e,t,i,r){"memberCanWriteToModel"in e||window.Sentry.addBreadcrumb({category:"database",message:`Unknown permissions when trying to save "${t}" to the "${this.scope}" ${this.visibility} scope"`,level:"warning"}),!("memberCanWriteToModel"in e)||this.canWrite(e)?await e.set(r??this.scope,this.visibility,t,i):window.Sentry.captureException(new Error("Error while editing scope"),{contexts:{WriteOperation:{scope:this.scope,visibility:this.visibility,key:t,hasCardId:!!r,memberType:await s.getMemberType(e)}}})}async writeMultiple(e,t,i){"memberCanWriteToModel"in e||window.Sentry.addBreadcrumb({category:"database",message:`Unknown permissions when trying to save "${Object.keys(t).join(", ")}" to the "${this.scope}" ${this.visibility} scope`,level:"warning"}),!("memberCanWriteToModel"in e)||this.canWrite(e)?await e.set(i??this.scope,this.visibility,t):window.Sentry.captureException(new Error("Error while editing scope"),{contexts:{WriteOperation:{scope:this.scope,visibility:this.visibility,key:Object.keys(t),hasCardId:!!i,memberType:await s.getMemberType(e)}}})}async delete(e,t,i){if("memberCanWriteToModel"in e||window.Sentry.addBreadcrumb({category:"database",message:`Unknown permissions when trying to save "${t}" to the "${this.scope}" ${this.visibility} scope"`,level:"warning"}),!("memberCanWriteToModel"in e)||this.canWrite(e))return e.remove(i??this.scope,this.visibility,t);window.Sentry.captureException(new Error("Error while editing scope"),{contexts:{DeleteOperation:{scope:this.scope,visibility:this.visibility,key:t,hasCardId:!!i,memberType:await s.getMemberType(e)}}})}async deleteMultiple(e,t,i){if("memberCanWriteToModel"in e||window.Sentry.addBreadcrumb({category:"database",message:`Unknown permissions when trying to save "${Object.keys(t).join(", ")}" to the "${this.scope}" ${this.visibility} scope`,level:"warning"}),!("memberCanWriteToModel"in e)||this.canWrite(e))return e.remove(i??this.scope,this.visibility,t);window.Sentry.captureException(new Error("Error while editing scope"),{contexts:{DeleteOperation:{scope:this.scope,visibility:this.visibility,key:Object.keys(t),hasCardId:!!i,memberType:await s.getMemberType(e)}}})}};n=s=r([t],n);var o=n;class a extends o{constructor(){super("board","shared")}}a.DISCUSSION_STATUS="leancoffeeDiscussionStatus",a.DISCUSSION_CARD_ID="leancoffeeDiscussionCardId",a.DISCUSSION_STARTED_AT="leancoffeeDiscussionStartedAt",a.DISCUSSION_PREVIOUS_ELAPSED="leancoffeeDiscussionPreviousElapsed",a.DISCUSSION_INTERVAL_ID="leancoffeeDiscussionIntervalId",a.POWER_UP_INSTALLATION_DATE="powerUpInstallationDate",a.ORGANISATION_HASH="organisationHash",a.BOARD_HASH="boardHash";var c=a,l=function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};let d=class{constructor({w:e}){this.boardStorage=new c,this.t=e.TrelloPowerUp.iframe({helpfulStacks:!1}),this.w=e,i(this),Promise.all([this.boardStorage.read(this.t,c.BOARD_HASH),this.boardStorage.read(this.t,c.ORGANISATION_HASH)]).then((([e,t])=>{this.w.Sentry&&this.w.Sentry.onLoad((async()=>{this.w.Sentry.setTags({organisationIdHash:e,boardIdHash:t})}))}))}toggleFields(e,t){this.w.document.querySelectorAll(e).forEach((e=>{const i=e.dataset.i18nId===t;e.style.display=i?"block":"none"}))}initLocaliser(e){this.w.TrelloPowerUp.util.initLocalizer(this.w.locale,{localization:this.t.arg("localization")}).then(e)}};d=l([t],d);var h=d;new class extends h{init(){this.currentCardBeingDiscussed=this.t.arg("currentCardBeingDiscussed"),this.currentDiscussionStatus=this.t.arg("currentDiscussionStatus"),this.isRunning="ONGOING"===this.currentDiscussionStatus,this.startButton=this.w.document.getElementById("start-button"),this.startButton.addEventListener("click",(async()=>{await this.t.notifyParent("done"),await this.t.closePopup()})),this.prepareLocalisation(),this.initLocaliser(this.onLocalised)}prepareLocalisation(){this.w.document.querySelectorAll(".message").forEach((e=>{e.dataset.i18nArgs=JSON.stringify({card:this.currentCardBeingDiscussed})}))}async onLocalised(){this.toggleFields(".message",this.isRunning?"ongoingRunning":"ongoingOnHold"),this.t.localizeNode(document.body),await this.t.sizeTo("body")}}({w:window}).init()}();
//# sourceMappingURL=ongoing_or_paused.a4ab7582d020b93ad6e3.js.map