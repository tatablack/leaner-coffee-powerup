try{let t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},e=(new t.Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="7faca407-9a7b-487b-ad9b-2c497a70aaf6",t._sentryDebugIdIdentifier="sentry-dbid-7faca407-9a7b-487b-ad9b-2c497a70aaf6")}catch(t){}!function(){"use strict";const t=(t,e,i)=>{const s=i.value,n="AsyncFunction"===s.constructor.name,r=`Leaner Coffee Power-Up: error in ${e} (reported)`;return i.value=n?async function(...t){try{return await s.apply(this,t)}catch(t){console.warn(r),window.Sentry.captureException(t)}}:function(...t){try{return s.apply(this,t)}catch(t){console.warn(r),window.Sentry.captureException(t)}},i};function e(e){const i=e.prototype;return Object.getOwnPropertyNames(i).filter((t=>"function"==typeof i[t]&&"constructor"!==t)).forEach((e=>{const s=Object.getOwnPropertyDescriptor(i,e);if(s&&"function"==typeof s.value){const n=t(0,e,s);Object.defineProperty(i,e,n)}})),e}const i=t=>{const e=t.constructor.prototype;Object.getOwnPropertyNames(e).filter((t=>"function"==typeof e[t]&&"constructor"!==t)).forEach((i=>e[i]=e[i].bind(t)))};var s,n=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let r=s=class{constructor(t="member",e="private"){Object.assign(this,{scope:t,visibility:e}),i(this)}static async getMemberType(t){const e=await t.board("memberships"),i=await t.member("id"),s=e.memberships.find((t=>t.idMember===i.id));return s?s.memberType:"unknown"}static notEnoughPrivileges(t){return t instanceof Error&&t.message.startsWith("Scope not editable by active member")}async read(t,e,i){return await t.get(i??this.scope,this.visibility,e)}async execute(t,e,...i){try{return await t[e](...i)}catch(e){const i=t.getContext(),n=e instanceof Error?e.message:e.toString();s.notEnoughPrivileges(e)&&await t.alert({message:t.localizeKey("notEnoughPermissions")}),window.Sentry.captureException(new Error("Error while editing scope: "+n),{contexts:{WriteOperation:{scope:this.scope,visibility:this.visibility,memberType:await s.getMemberType(t),permissions:i.permissions}}})}}async write(t,e,i,s){await this.execute(t,"set",s??this.scope,this.visibility,e,i)}async writeMultiple(t,e,i){await this.execute(t,"set",i??this.scope,this.visibility,e)}async delete(t,e,i){await this.execute(t,"remove",i??this.scope,this.visibility,e)}async deleteMultiple(t,e,i){await this.execute(t,"remove",i??this.scope,this.visibility,e)}};r=s=n([e],r);var o=r;class a extends o{constructor(){super("board","shared")}}a.DISCUSSION_STATUS="leancoffeeDiscussionStatus",a.DISCUSSION_CARD_ID="leancoffeeDiscussionCardId",a.DISCUSSION_STARTED_AT="leancoffeeDiscussionStartedAt",a.DISCUSSION_PREVIOUS_ELAPSED="leancoffeeDiscussionPreviousElapsed",a.DISCUSSION_INTERVAL_ID="leancoffeeDiscussionIntervalId",a.POWER_UP_INSTALLATION_DATE="powerUpInstallationDate",a.ORGANISATION_HASH="organisationHash",a.BOARD_HASH="boardHash";var c=a,l=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let u=class{constructor({w:t}){this.boardStorage=new c,this.t=t.TrelloPowerUp.iframe({helpfulStacks:!1}),this.w=t,i(this),Promise.all([this.boardStorage.read(this.t,c.BOARD_HASH),this.boardStorage.read(this.t,c.ORGANISATION_HASH)]).then((([t,e])=>{this.w.Sentry&&this.w.Sentry.onLoad((async()=>{this.w.Sentry.setTags({organisationIdHash:t,boardIdHash:e})}))}))}toggleFields(t,e){this.w.document.querySelectorAll(t).forEach((t=>{const i=t.dataset.i18nId===e;t.style.display=i?"block":"none"}))}initLocaliser(t){this.w.TrelloPowerUp.util.initLocalizer(this.w.locale,{localization:this.t.arg("localization")}).then(t)}};u=l([e],u);var d=u;new class extends d{init(){this.currentCardBeingDiscussed=this.t.arg("currentCardBeingDiscussed"),this.currentDiscussionStatus=this.t.arg("currentDiscussionStatus"),this.isRunning="ONGOING"===this.currentDiscussionStatus,this.startButton=this.w.document.getElementById("start-button"),this.startButton.addEventListener("click",(async()=>{await this.t.notifyParent("done"),await this.t.closePopup()})),this.prepareLocalisation(),this.initLocaliser(this.onLocalised)}prepareLocalisation(){this.w.document.querySelectorAll(".message").forEach((t=>{t.dataset.i18nArgs=JSON.stringify({card:this.currentCardBeingDiscussed})}))}async onLocalised(){this.toggleFields(".message",this.isRunning?"ongoingRunning":"ongoingOnHold"),this.t.localizeNode(document.body),await this.t.sizeTo("body")}}({w:window}).init()}();
//# sourceMappingURL=ongoing_or_paused.35184fed92cb2078b7bb.js.map