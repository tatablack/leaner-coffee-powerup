try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0dda8e1b-36fb-4f9f-b703-b69b94c9056f",e._sentryDebugIdIdentifier="sentry-dbid-0dda8e1b-36fb-4f9f-b703-b69b94c9056f")}catch(e){}!function(){"use strict";const e=(e,t,i)=>{const r=i.value,s="AsyncFunction"===r.constructor.name,o=`Leaner Coffee Power-Up: error in ${t} (reported)`;return i.value=s?async function(...e){try{return await r.apply(this,e)}catch(e){console.warn(o),window.Sentry.captureException(e)}}:function(...e){try{return r.apply(this,e)}catch(e){console.warn(o),window.Sentry.captureException(e)}},i};function t(t){const i=t.prototype;return Object.getOwnPropertyNames(i).filter((e=>"function"==typeof i[e]&&"constructor"!==e)).forEach((t=>{const r=Object.getOwnPropertyDescriptor(i,t);if(r&&"function"==typeof r.value){const s=e(0,t,r);Object.defineProperty(i,t,s)}})),t}const i=e=>{const t=e.constructor.prototype;Object.getOwnPropertyNames(t).filter((e=>"function"==typeof t[e]&&"constructor"!==e)).forEach((i=>t[i]=t[i].bind(e)))};var r=function(e,t,i,r){var s,o=arguments.length,n=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};let s=class{constructor(e="member",t="private"){Object.assign(this,{scope:e,visibility:t}),i(this)}canWrite(e){return"member"===this.scope||e.memberCanWriteToModel(this.scope)}async isObserver(e){const t=await e.board("memberships"),i=await e.member("id"),r=t.memberships.find((e=>e.idMember===i.id));return r&&"observer"===r.memberType}read(e,t,i){return e.get(i??this.scope,this.visibility,t)}async write(e,t,i,r){!("memberCanWriteToModel"in e)||this.canWrite(e)?await e.set(r??this.scope,this.visibility,t,i):window.Sentry.captureException(new Error("Error while editing scope"),{contexts:{WriteOperation:{scope:this.scope,visibility:this.visibility,key:t,hasCardId:!!r,isObserver:await this.isObserver(e)}}})}async writeMultiple(e,t,i){!("memberCanWriteToModel"in e)||this.canWrite(e)?await e.set(i??this.scope,this.visibility,t):window.Sentry.captureException(new Error("Error while editing scope"),{contexts:{WriteOperation:{scope:this.scope,visibility:this.visibility,key:t,hasCardId:!!i,isObserver:await this.isObserver(e)}}})}async delete(e,t,i){if(!("memberCanWriteToModel"in e)||this.canWrite(e))return e.remove(i??this.scope,this.visibility,t);window.Sentry.captureException(new Error("Error while editing scope"),{contexts:{DeleteOperation:{scope:this.scope,visibility:this.visibility,key:t,hasCardId:!!i,isObserver:await this.isObserver(e)}}})}async deleteMultiple(e,t,i){if(!("memberCanWriteToModel"in e)||this.canWrite(e))return e.remove(i??this.scope,this.visibility,t);window.Sentry.captureException(new Error("Error while editing scope"),{contexts:{DeleteOperation:{scope:this.scope,visibility:this.visibility,key:t,hasCardId:!!i,isObserver:await this.isObserver(e)}}})}};s=r([t],s);var o=s;class n extends o{constructor(){super("board","shared")}}n.DISCUSSION_STATUS="leancoffeeDiscussionStatus",n.DISCUSSION_CARD_ID="leancoffeeDiscussionCardId",n.DISCUSSION_STARTED_AT="leancoffeeDiscussionStartedAt",n.DISCUSSION_PREVIOUS_ELAPSED="leancoffeeDiscussionPreviousElapsed",n.DISCUSSION_INTERVAL_ID="leancoffeeDiscussionIntervalId",n.POWER_UP_INSTALLATION_DATE="powerUpInstallationDate",n.ORGANISATION_HASH="organisationHash",n.BOARD_HASH="boardHash";var a=n;class c extends o{constructor(){super("card","shared")}}c.DISCUSSION_STATUS="leancoffeeDiscussionStatus",c.DISCUSSION_ELAPSED="leancoffeeDiscussionElapsed",c.DISCUSSION_THUMBS="leancoffeeDiscussionThumbs",c.VOTES="leancoffeeVotes",c.DISCUSSION_BUTTON_LABEL="discussionButtonLabel";var l=c;class d extends o{constructor(){super("member","private")}}d.POWER_UP_VERSION="powerUpVersion";var p=d,f=function(e,t,i,r){var s,o=arguments.length,n=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(n=(o<3?s(n):o>3?s(t,i,n):s(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};let u=class{constructor({w:e,config:t}){this.w=e,this.config=t,this.boardStorage=new a,this.cardStorage=new l,this.memberStorage=new p,i(this)}};u=f([t],u);const{supportedLocales:h}={hostname:"https://leaner-coffee.tatablack.net",defaultDuration:3e5,supportedLocales:["en","it"]},b={defaultLocale:"en",supportedLocales:h,resourceUrl:"/i18n/{locale}.json"};class y extends u{constructor({w:e,config:t}){super({w:e,config:t}),this.t=e.TrelloPowerUp.iframe({localization:b,helpfulStacks:!1}),Promise.all([this.boardStorage.read(this.t,a.ORGANISATION_HASH),this.boardStorage.read(this.t,a.BOARD_HASH)]).then((([e,t])=>{this.w.Sentry&&this.w.Sentry.onLoad((async()=>{this.w.Sentry.setTags({organisationIdHash:e,boardIdHash:t})}))}))}}new class extends y{init(){this.t.render((()=>{this.t.localizeNode(document.body),this.t.sizeTo("#leanCoffeeSettingsForm")}))}async showData(e){e.preventDefault()}async wipeData(e){e.preventDefault()}}({w:window,config:{production:{hostname:"https://leaner-coffee.tatablack.net",defaultDuration:3e5,supportedLocales:["en","it"]}}}).init()}();
//# sourceMappingURL=settings.70f76dc5d265758de148.js.map