try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="5b16568a-b436-41a4-afee-124af5cd718e",e._sentryDebugIdIdentifier="sentry-dbid-5b16568a-b436-41a4-afee-124af5cd718e")}catch(e){}!function(){"use strict";const e=(e,t,s)=>{const o=s.value,i="AsyncFunction"===o.constructor.name,n=`Leaner Coffee Power-Up: error in ${t} (reported)`;return s.value=i?async function(...e){try{return await o.apply(this,e)}catch(e){console.warn(n),window.Sentry.captureException(e)}}:function(...e){try{return o.apply(this,e)}catch(e){console.warn(n),window.Sentry.captureException(e)}},s};function t(t){const s=t.prototype;return Object.getOwnPropertyNames(s).filter((e=>"function"==typeof s[e]&&"constructor"!==e)).forEach((t=>{const o=Object.getOwnPropertyDescriptor(s,t);if(o&&"function"==typeof o.value){const i=e(0,t,o);Object.defineProperty(s,t,i)}})),t}const s=e=>{const t=e.constructor.prototype;Object.getOwnPropertyNames(t).filter((e=>"function"==typeof t[e]&&"constructor"!==e)).forEach((s=>t[s]=t[s].bind(e)))};var o,i=function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};let n=o=class{constructor(e="member",t="private"){Object.assign(this,{scope:e,visibility:t}),s(this)}static async getMemberType(e){const t=await e.board("memberships"),s=await e.member("id"),o=t.memberships.find((e=>e.idMember===s.id));return o?o.memberType:"unknown"}static notEnoughPrivileges(e){return e instanceof Error&&e.message.startsWith("Scope not editable by active member")}async read(e,t,s){return await e.get(s??this.scope,this.visibility,t)}async execute(e,t,...s){try{return await e[t](...s)}catch(t){const s=e.getContext(),i=t instanceof Error?t.message:t.toString();o.notEnoughPrivileges(t)&&await e.alert({message:e.localizeKey("notEnoughPermissions")}),window.Sentry.captureException(new Error("Error while editing scope: "+i),{contexts:{WriteOperation:{scope:this.scope,visibility:this.visibility,memberType:await o.getMemberType(e),permissions:s.permissions}}})}}async write(e,t,s,o){await this.execute(e,"set",o??this.scope,this.visibility,t,s)}async writeMultiple(e,t,s){await this.execute(e,"set",s??this.scope,this.visibility,t)}async delete(e,t,s){await this.execute(e,"remove",s??this.scope,this.visibility,t)}async deleteMultiple(e,t,s){await this.execute(e,"remove",s??this.scope,this.visibility,t)}};n=o=i([t],n);var r=n;class a extends r{constructor(){super("board","shared")}}a.DISCUSSION_STATUS="leancoffeeDiscussionStatus",a.DISCUSSION_CARD_ID="leancoffeeDiscussionCardId",a.DISCUSSION_STARTED_AT="leancoffeeDiscussionStartedAt",a.DISCUSSION_PREVIOUS_ELAPSED="leancoffeeDiscussionPreviousElapsed",a.DISCUSSION_INTERVAL_ID="leancoffeeDiscussionIntervalId",a.POWER_UP_INSTALLATION_DATE="powerUpInstallationDate",a.ORGANISATION_HASH="organisationHash",a.BOARD_HASH="boardHash";var c=a;class l extends r{constructor(){super("card","shared")}}l.DISCUSSION_STATUS="leancoffeeDiscussionStatus",l.DISCUSSION_ELAPSED="leancoffeeDiscussionElapsed",l.DISCUSSION_THUMBS="leancoffeeDiscussionThumbs",l.VOTES="leancoffeeVotes",l.DISCUSSION_BUTTON_LABEL="discussionButtonLabel";var u=l;class f extends r{constructor(){super("member","private")}}f.POWER_UP_VERSION="powerUpVersion";var p=f,d=function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};let h=class{constructor({w:e,config:t}){this.w=e,this.config=t,this.boardStorage=new c,this.cardStorage=new u,this.memberStorage=new p,s(this)}};h=d([t],h);const{supportedLocales:y}={hostname:"https://leaner-coffee.tatablack.net",defaultDuration:3e5,supportedLocales:["en","it"]},S={defaultLocale:"en",supportedLocales:y,resourceUrl:"/i18n/{locale}.json"};class b extends h{constructor({w:e,config:t}){super({w:e,config:t}),this.t=e.TrelloPowerUp.iframe({localization:S,helpfulStacks:!1}),Promise.all([this.boardStorage.read(this.t,c.ORGANISATION_HASH),this.boardStorage.read(this.t,c.BOARD_HASH)]).then((([e,t])=>{this.w.Sentry&&this.w.Sentry.onLoad((async()=>{this.w.Sentry.setTags({organisationIdHash:e,boardIdHash:t})}))}))}}new class extends b{init(){this.t.render((()=>{this.t.localizeNode(document.body),this.t.sizeTo("#leanCoffeeSettingsForm")}))}async showData(e){e.preventDefault()}async wipeData(e){e.preventDefault()}}({w:window,config:{production:{hostname:"https://leaner-coffee.tatablack.net",defaultDuration:3e5,supportedLocales:["en","it"]}}}).init()}();
//# sourceMappingURL=settings.bffe066899ea16e8eaea.js.map